<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />

<style>
  body {
    font-family: sans-serif;
    padding: 1rem;
    max-width: 700px;
    margin: auto;
  }

  h1 {
    text-align: center;
  }

  label {
    display: flex;
    flex-direction: column;
    font-weight: 600;
    font-size: .9rem;
    margin-top: 1rem;
  }

  input {
    margin-top: .3rem;
    padding: .5rem;
    font-size: 1rem;
    width: 100%;
  }

  .result {
    background:#f5f5f5;
    padding:12px;
    margin-top:1rem;
    border-radius:6px;
    font-size:1.1rem;
  }

  @media (max-width: 600px) {
    form {
      grid-template-columns: 1fr;
    }
  }
</style>
    
<title>Picture Frame Calculator</title>
</head>

<body>

<h1>Picture Frame Calculator</h1>

<label>Picture Width</label>
<input id="picW" placeholder="e.g. 500mm">

<label>Picture Height</label>
<input id="picH" placeholder="e.g. 400mm">

<label>Mat Width</label>
<input id="matW" placeholder="e.g. 50mm">

<label>Mat Height</label>
<input id="matH" placeholder="50mm">

<label>Frame Material Width</label>
<input id="fmW" placeholder="e.g. 40mm">

<label>Frame Material Height</label>
<input id="fmH" placeholder="40mm">

<label>Frame Inset (default 6mm)</label>
<input id="inset" value="6mm">

<div class="result">
    <div><b>Frame Width:</b> <span id="outW">—</span></div>
    <div><b>Frame Height:</b> <span id="outH">—</span></div>
</div>

<!-- Preview box -->
<h2>Preview</h2>
<div id="preview-container" style="border:1px solid #ccc; width:100%; max-width:500px; padding:10px; margin-top:1rem;">
  <div id="frame-preview" style="background:#8b4513; position:relative; margin:auto;">
    <div id="mat-preview" style="background:#f5f5dc; position:absolute; top:0; left:0;">
      <div id="pic-preview" style="background:#add8e6; position:absolute; top:0; left:0;"></div>
    </div>
  </div>
</div>

<script>
// Converts "600mm", "60cm", "0.6m" -> mm
function toMM(val){
    if(!val) return 0;
    val = val.toString().trim().toLowerCase();
    if(val.endsWith("mm")) return parseFloat(val);
    if(val.endsWith("cm")) return parseFloat(val)*10;
    if(val.endsWith("m"))  return parseFloat(val)*1000;
    return parseFloat(val);
}

// Elements
let picWEl = document.getElementById("picW");
let picHEl = document.getElementById("picH");
let matWEl = document.getElementById("matW");
let matHEl = document.getElementById("matH");
let fmWEl  = document.getElementById("fmW");
let fmHEl  = document.getElementById("fmH");
let insetEl= document.getElementById("inset");

const frameEl = document.getElementById("frame-preview");
const matEl   = document.getElementById("mat-preview");
const picEl   = document.getElementById("pic-preview");

const scale = 0.5; // 0.5px per mm

// Main calculation
function calc(){
    let picW = toMM(picWEl.value);
    let picH = toMM(picHEl.value);
    let matW = toMM(matWEl.value);
    let matH = toMM(matHEl.value);
    let fmW  = toMM(fmWEl.value);
    let fmH  = toMM(fmHEl.value);
    let inset= toMM(insetEl.value || "6");

    // formula: total = picture + mat*2 + frame*2 - inset*2
    let frameWidth  = picW + (matW*2) + (fmW*2) - (inset*2);
    let frameHeight = picH + (matH*2) + (fmH*2) - (inset*2);

    document.getElementById("outW").textContent = Math.round(frameWidth)+" mm";
    document.getElementById("outH").textContent = Math.round(frameHeight)+" mm";

    // Update preview
    frameEl.style.width  = (frameWidth*scale)+"px";
    frameEl.style.height = (frameHeight*scale)+"px";
    frameEl.style.position = "relative";

    matEl.style.width  = ((picW + matW*2)*scale)+"px";
    matEl.style.height = ((picH + matH*2)*scale)+"px";
    matEl.style.top = (fmH*scale - inset*scale)+"px";
    matEl.style.left = (fmW*scale - inset*scale)+"px";

    picEl.style.width  = (picW*scale)+"px";
    picEl.style.height = (picH*scale)+"px";
    picEl.style.top = (matH*scale)+"px";
    picEl.style.left = (matW*scale)+"px";
}

// Save to localStorage
function saveToLocalStorage() {
    localStorage.setItem("picW", picWEl.value);
    localStorage.setItem("picH", picHEl.value);
    localStorage.setItem("matW", matWEl.value);
    localStorage.setItem("matH", matHEl.value);
    localStorage.setItem("fmW", fmWEl.value);
    localStorage.setItem("fmH", fmHEl.value);
    localStorage.setItem("inset", insetEl.value);
}

// Load from localStorage
function loadFromLocalStorage() {
    if(localStorage.getItem("picW")) picWEl.value = localStorage.getItem("picW");
    if(localStorage.getItem("picH")) picHEl.value = localStorage.getItem("picH");
    if(localStorage.getItem("matW")) matWEl.value = localStorage.getItem("matW");
    if(localStorage.getItem("matH")) matHEl.value = localStorage.getItem("matH");
    if(localStorage.getItem("fmW"))  fmWEl.value = localStorage.getItem("fmW");
    if(localStorage.getItem("fmH"))  fmHEl.value = localStorage.getItem("fmH");
    if(localStorage.getItem("inset")) insetEl.value = localStorage.getItem("inset");
}

// Event listeners
document.querySelectorAll("input").forEach(el => {
    el.addEventListener("input", () => {
        saveToLocalStorage();
        calc();
    });
});

// Load values and calculate on page load
window.addEventListener("DOMContentLoaded", () => {
    loadFromLocalStorage();
    calc();
});
</script>

</body>
</html>
